From 9e679f88e690f65a81e4590e172061f0f6be5a4d Mon Sep 17 00:00:00 2001
From: "Gary D. Gregory" <ggregory@apache.org>
Date: Mon, 23 May 2016 17:11:03 +0000
Subject: [PATCH] [DAEMON-347] Add AArch64 support to
 src/native/unix/support/apsupport.m4.

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/daemon/trunk@1745237 13f79535-47bb-0310-9956-ffa450edef68
---
 src/changes/changes.xml              | 45 ++++++++++++++++++++++++++++++++++++
 src/native/unix/support/apsupport.m4 |  8 ++++++-
 2 files changed, 52 insertions(+), 1 deletion(-)
 create mode 100644 src/changes/changes.xml

diff --git a/src/changes/changes.xml b/src/changes/changes.xml
new file mode 100644
index 0000000..80fe85a
--- /dev/null
+++ b/src/changes/changes.xml
@@ -0,0 +1,45 @@
+<?xml version="1.0"?>
+<!--
+  Licensed to the Apache Software Foundation (ASF) under one or more
+  contributor license agreements. See the NOTICE file distributed with
+  this work for additional information regarding copyright ownership.
+  The ASF licenses this file to You under the Apache License, Version 2.0
+  (the "License"); you may not use this file except in compliance with
+  the License. You may obtain a copy of the License at
+
+  http://www.apache.org/licenses/LICENSE-2.0
+
+  Unless required by applicable law or agreed to in writing, software
+  distributed under the License is distributed on an "AS IS" BASIS,
+  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+  See the License for the specific language governing permissions and
+  limitations under the License.
+-->
+
+<!--
+  This file is used by the maven-changes-plugin to generate the release notes.
+  Useful ways of finding items to add to this file are:
+
+  1. Add items when you fix a bug or add a feature (this makes the
+  release process easy :-).
+
+  2. Do a JIRA search for tickets closed since the previous release.
+
+  3. Use the report generated by the maven-changelog-plugin to see all
+  SVN commits. Set the project.properties' maven.changelog.range
+  property to the number of days since the last release.
+
+
+  The <action> type attribute can be add,update,fix,remove.
+-->
+
+<document>
+  <properties>
+    <title>Release Notes</title>
+  </properties>
+  <body>
+    <release version="1.1.0" date="2016-MM-DD" description="Feature and bug fix release">
+      <action issue="DAEMON-347" type="update" dev="ggregory" due-to="Ganesh Raju">Add AArch64 support to src/native/unix/support/apsupport.m4</action>
+    </release>
+  </body>
+</document>
diff --git a/src/native/unix/support/apsupport.m4 b/src/native/unix/support/apsupport.m4
index db91e32..e03969a 100644
--- a/unix/support/apsupport.m4
+++ b/unix/support/apsupport.m4
@@ -166,6 +166,11 @@
     supported_os="arm"
     HOST_CPU=arm
     ;;
+  aarch64*)
+    CFLAGS="$CFLAGS -DCPU=\\\"aarch64\\\""
+    supported_os="linux"
+    HOST_CPU=aarch64
+    ;;
   *)
     AC_MSG_RESULT([failed])
     AC_MSG_ERROR([Unsupported CPU architecture "$host_cpu"]);;
